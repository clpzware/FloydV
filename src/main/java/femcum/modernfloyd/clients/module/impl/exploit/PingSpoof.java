package femcum.modernfloyd.clients.module.impl.exploit;

import femcum.modernfloyd.clients.component.impl.player.PingSpoofComponent;
import femcum.modernfloyd.clients.event.Listener;
import femcum.modernfloyd.clients.event.annotations.EventLink;
import femcum.modernfloyd.clients.event.impl.motion.PreUpdateEvent;
import femcum.modernfloyd.clients.module.Module;
import femcum.modernfloyd.clients.module.api.Category;
import femcum.modernfloyd.clients.module.api.ModuleInfo;
import femcum.modernfloyd.clients.util.math.MathUtil;
import femcum.modernfloyd.clients.value.impl.BooleanValue;
import femcum.modernfloyd.clients.value.impl.BoundsNumberValue;

@ModuleInfo(aliases = {"module.combat.pingspoof.name"}, description = "module.exploit.pingspoof.description", category = Category.EXPLOIT)
public class PingSpoof extends Module {

    private final BoundsNumberValue delay = new BoundsNumberValue("Delay", this, 1000, 1500, 50, 30000, 1);
    private final BooleanValue teleports = new BooleanValue("Delay Teleports", this, false);
    private final BooleanValue velocity = new BooleanValue("Delay Velocity", this, false);
    private final BooleanValue entities = new BooleanValue("Delay Entity Movements", this, false);

    @EventLink
    public final Listener<PreUpdateEvent> onPreUpdate = event ->
            PingSpoofComponent.spoof((int) MathUtil.getRandom(delay.getValue().intValue(),
                            delay.getSecondValue().intValue()), true, velocity.getValue(),
                    teleports.getValue(), entities.getValue());
}
